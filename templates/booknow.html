<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Payment Gateway</title>
    <link rel="stylesheet" href="/static/pstyle.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
     {% with messages=get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for i,j in messages %}
                        <script>
                            Swal.fire({
                                icon:"{{'success' if i=='success' else 'error'}}",
                                title:"{{j}}"
                            });
                        </script>
                    {% endfor %}
                {% endif %}
            {% endwith %}
    <div class="payment-container">
        <h2>Payment for {{ train.trainname }}</h2>
        <p>From: {{ train.source }} | To: {{ train.destination }}</p>
        <p>Price: ₹{{ train.price }} | Status: {{train.status}} </p>

        <form method="POST" action='/booknow/{{train.tid}}'>
            <label>Cardholder Name</label>
            <input type="text" name="cardname" value="{{name}}" required>

            <label>Card Number</label>
            <input type="number" name="cardnumber" placeholder="12345678" required maxlength="8" pattern='\d{8}' title="please enter 8 digits only">

            <label>Expiry Date</label>
            <input type="month" name="expirydate" required>

            <label>CVV</label>
            <input type="password" name="cvv" placeholder="123" maxlength="3" required>

            <label>Date</label>
            <input type='date' name='date' value={{today}} readonly>

            <button type="submit">Pay ₹{{ train.price }}</button>
        </form>
    </div>
</body>
</html>

